<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Registration Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <style>
        body {
            background: linear-gradient(135deg, #74ebd5, #ACB6E5);
        }
        .form-container {
            background-color: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }
        h2, h4 {
            color: #003366;
        }
        .form-control::placeholder {
            color: #6c757d;
            opacity: 1;
        }
        .icon-input i {
            position: absolute;
            left: 15px;
            top: 12px;
            color: #007bff;
        }
        .icon-input input {
            padding-left: 35px;
        }
    </style>
</head>
<body>
<div class="container mt-5">
    <div class="form-container">
        <h2 class="text-center mb-4">Student Registration Form</h2>
        <h4 class="text-center mb-4">Batch: <span th:text="${batch.batchname}"></span> | Course: <span th:text="${batch.course.coursename}"></span></h4> 
          <form id="studentForm" enctype="multipart/form-data">
            <div class="row g-3">

                <div class="col-md-6 position-relative icon-input">
                    <i class="fas fa-user"></i>
                    <input type="text" name="name" class="form-control" placeholder="Name" required>
                </div>
                <div class="col-md-6 position-relative icon-input">
                    <i class="fas fa-phone"></i>
                    <input type="text" name="mobileWhatsApp" class="form-control" placeholder="Mobile" required>
                </div>
                <div class="col-md-6 position-relative icon-input">
                    <i class="fas fa-phone-alt"></i>
                    <input type="text" name="alternateMobileNumber" class="form-control" placeholder="Alternate Mobile">
                </div>
                <div class="col-md-6 position-relative icon-input">
                    <i class="fas fa-envelope"></i>
                    <input type="email" name="email" class="form-control" placeholder="Email" required>
                </div>

                <div class="col-md-6 icon-input position-relative">
                    <i class="fas fa-university"></i>
                    <input type="text" name="pg" class="form-control" placeholder="PG College">
                </div>
                <div class="col-md-6 icon-input position-relative">
                    <i class="fas fa-book-reader"></i>
                    <input type="text" name="pgStream" class="form-control" placeholder="PG Stream">
                </div>
                <div class="col-md-6 icon-input position-relative">
                    <i class="fas fa-calendar"></i>
                    <input type="number" name="pgYOP" class="form-control" placeholder="PG Year of Passing">
                </div>
                <div class="col-md-6 icon-input position-relative">
                    <i class="fas fa-percentage"></i>
                    <input type="number" step="0.01" name="pgPercentage" class="form-control" placeholder="PG Percentage">
                </div>

                <div class="col-md-6 icon-input position-relative">
                    <i class="fas fa-school"></i>
                    <input type="text" name="graduation" class="form-control" placeholder="Graduation College">
                </div>
                <div class="col-md-6 icon-input position-relative">
                    <i class="fas fa-book-open"></i>
                    <input type="text" name="graduationStream" class="form-control" placeholder="Graduation Stream">
                </div>
                <div class="col-md-6 icon-input position-relative">
                    <i class="fas fa-calendar-alt"></i>
                    <input type="number" name="graduationYOP" class="form-control" placeholder="Graduation Year of Passing">
                </div>
                <div class="col-md-6 icon-input position-relative">
                    <i class="fas fa-percent"></i>
                    <input type="number" step="0.01" name="graduationPercentage" class="form-control" placeholder="Graduation Percentage">
                </div>

                <div class="col-md-6 icon-input position-relative">
                    <i class="fas fa-building"></i>
                    <input type="text" name="interOrDiploma" class="form-control" placeholder="Inter/Diploma College">
                </div>
                <div class="col-md-6 icon-input position-relative">
                    <i class="fas fa-stream"></i>
                    <input type="text" name="interOrDiplomaStream" class="form-control" placeholder="Inter/Diploma Stream">
                </div>
                <div class="col-md-6 icon-input position-relative">
                    <i class="fas fa-percent"></i>
                    <input type="number" step="0.01" name="interOrDiplomaPercentage" class="form-control" placeholder="Inter/Diploma Percentage">
                </div>
                <div class="col-md-6 icon-input position-relative">
                    <i class="fas fa-calendar-check"></i>
                    <input type="number" name="interOrDiplomaYOP" class="form-control" placeholder="Inter/Diploma Year of Passing">
                </div>

               
                <div class="col-md-6 icon-input position-relative">
                    <i class="fas fa-percent"></i>
                    <input type="number" step="0.01" name="tenthPercentage" class="form-control" placeholder="10th Percentage">
                </div>
                <div class="col-md-6 icon-input position-relative">
                    <i class="fas fa-calendar-day"></i>
                    <input type="number" name="tenthYOP" class="form-control" placeholder="10th Year of Passing">
                </div>

                <div class="col-md-6 icon-input position-relative">
                    <i class="fas fa-user-tie"></i>
                    <input type="text" name="internshipExperience" class="form-control" placeholder="Internship Experience">
                </div>
                <div class="col-md-6 icon-input position-relative">
                    <i class="fas fa-hourglass-half"></i>
                    <input type="text" name="internshipRoleDuration" class="form-control" placeholder="Internship Role & Duration">
                </div>
                <div class="col-md-6 icon-input position-relative">
                    <i class="fas fa-briefcase"></i>
                    <input type="number" step="0.1" name="fullTimeITExperience" class="form-control" placeholder="Full-time IT Experience (Years)">
                </div>
                <div class="col-md-6 icon-input position-relative">
                    <i class="fas fa-award"></i>
                    <input type="text" name="experiencedDomainRolePackage" class="form-control" placeholder="Experienced Domain/Role/Package">
                </div>
                <div class="col-md-6 icon-input position-relative">
                    <i class="fas fa-pause-circle"></i>
                    <input type="text" name="careerGap" class="form-control" placeholder="Career Gap">
                </div>

                <div class="col-md-6">
                    <label class="form-label fw-bold"><i class="fas fa-image"></i> Photo</label>
                    <input type="file" name="photo" class="form-control" required>
                </div>

                <div class="col-md-6">
                    <label class="form-label fw-bold"><i class="fas fa-file-alt"></i> Resume</label>
                    <input type="file" name="resume" class="form-control" required>
                </div>
                    <input type="hidden" name="batch" th:value="${batch.id}" />

            </div>
            <div class="text-center mt-4">
                <button type="submit" class="btn btn-success btn-lg"><i class="fas fa-paper-plane"></i> Submit</button>
            </div>
        </form>
    </div>
</div>
<!-- Success Modal -->
<div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="successModalLabel">Registration Status</h5>
      </div>
      <div class="modal-body text-center">
        <h4>Successfully Registered!</h4>
      </div>
      <div class="modal-footer">
        <button type="button" id="okButton" class="btn btn-primary">OK</button>
      </div>
    </div>
  </div>
</div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
$(document).ready(function(){
    $("#studentForm").on("submit", function(e){
        e.preventDefault();

        let formData = new FormData(this);

        $.ajax({
            url: "/student/saveStudent",  // Ensure this matches your controller
            type: "POST",
            data: formData,
            contentType: false,
            processData: false,
            success: function(response){
                // Show success modal
                $("#successModal").modal('show');
            },
            error: function(err){
                alert("Something went wrong! Please try again.");
            }
        });
    });

    // On clicking OK, redirect to desired page
    $("#okButton").click(function(){
        window.location.href = "/batch/createBatch"; // Replace with the page where you want to show batch or student list
    });
});
</script>



<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
